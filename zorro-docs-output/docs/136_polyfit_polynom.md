---
title: "polyfit, polynom"
source: "https://zorro-project.com/manual/en/polyfit.htm"
---

# polyfit, polynom

## polyfit (var\* Coeff, var\* Data, int Length, int Order, var Weight) : var

Polynomial regression. Generates a polynomial of the form **_y = a_****_n_**x**_n_** **_+ ... + a_****_1_****_x + a_****_0_**  that is the best fit to a section of a price series or any other data series. This polynomial can be used for extrapolating the **Data** series into the future, and thus predicting future prices.

### Parameters:

<table border="0"><tbody><tr><td><strong>Coeff</strong></td><td>A <strong>var[8]</strong> array for storing the calculated polynomial coefficients <strong><em>a</em></strong><sub><strong><em>n</em></strong></sub>, or <strong>0</strong> for storing the coefficients internally.</td></tr><tr><td><strong>Data</strong></td><td>Data series to be approximated by the polynomial.</td></tr><tr><td><strong>Length</strong></td><td>Number of elements in the <strong>Data</strong> series to be approximated by the polynomial.</td></tr><tr><td><strong>Order</strong></td><td>Order of the polynomial (<strong>1..7</strong>). Use <strong>1</strong> for linear regression, <strong>2</strong> for parabolic (quadratic) regression, and higher numbers for <em><strong>n</strong></em>th-order regression.</td></tr><tr><td><strong>Weight</strong></td><td>Ratio of the weight of the last data value to the weight of the first value, for "fading-memory" polynomials. Use <strong>1</strong> for equal weights.</td></tr></tbody></table>

### Returns

Correlation coefficient, normally in the **0..1** range. Gives the similarity of the price curve and the polynomial.  

### Modifies

**Coeff** - set to the coefficients of the polynomial, in the order of their index, starting with C**oeff\[0\]**. The remaining coefficients are set to 0.

## polynom (var\* Coeff, int Offs) : var

Returns the value of the polynomial with the given coefficients at a given offset.

### Parameters:

<table border="0"><tbody><tr><td><strong>Coeff</strong></td><td>A <strong>var[8]</strong> array that contains the polynomial coefficients <strong><em>a</em></strong><sub><strong><em>n</em></strong></sub>, or <strong>0</strong> for using the last coefficients generated by <strong>polyfit</strong>.</td></tr><tr><td><strong>Offs</strong></td><td>The offset into the polyfit <strong>Data</strong> series of the returned polynomial value. Use negative offsets for extending the series into the future.</td></tr></tbody></table>

### Returns

Value of the polynomial at the given bar offset.  
   

### Remarks:

*   Polynomials of order **1** (straight line), **2** (parabola), or **3** are useful for price change predictions. Higher order polynomials are unlikely to give good predictions.
*   The weight ratio can be used for giving recent data more weight; however the best predictions are usually generated with **weight** at **1**.
*   For better accuracy in price prediction, don't fit the polynomial to a price series, but to a series of price differences. Price differences vary more than prices and thus give more accurate correlation coefficients.
*   As data series are stored in reverse order, a rising data series generates a polynomial with a falling slope, and vice versa.
*   For predicting curve events with polynomial regression, such as crossovers, peaks, or valleys, use the [predict](131_predict.md) function.
*   For logistic linear regression with multiple variables, use the [advise(PERCEPTRON,...)](advisor.md) function.

### Examples:

```c
_// least square moving average indicator_
var LSMA(vars Data,int Period,int Offset)
{
  polyfit(0,Data,Period,1,0);
  return polynom(0,Offset);
}

_// quadratic least square moving average indicator_
var QLSMA(vars Data,int Period,int Offset)
{
  polyfit(0,Data,Period,2,0);
  return polynom(0,Offset);
}

_// predict price change by parabolic regression_
function run()  
{  
  vars Diff = series(price(0)-price(1));

  var Correlation = polyfit(0,Diff,15,2,1);  
_// sum up the differences for predicting the price change over the next 3 bars_  
  var Change3 = polynom(0,-1)+polynom(0,-2)+polynom(0,-3);   
	  
  plot("Prediction",price(0)+Change3,MAIN,BLUE);  
  plot("Correlation",Correlation,NEW,GREEN);  
}
```

### See also:

[frechet](detect.md), [advise](advisor.md), [predict](131_predict.md)

[► latest version online](javascript:window.location.href = 'https://zorro-project.com/manual/en' + window.location.href.slice\(window.location.href.lastIndexOf\('/'\)\))